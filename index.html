<!doctype html>
<html>
<head>
	<title>Neovis.js Simple Example</title>
	<style type="text/css">
		html, body {
			font: 16pt arial;
		}

		#viz {
			width: 900px;
			height: 700px;
			border: 1px solid lightgray;
			font: 22pt arial;
		}
	</style>
	<script src="https://rawgit.com/neo4j-contrib/neovis.js/master/dist/neovis.js"></script>

</head>
<script>

	var a
	var array=new Array();

	var array2= new Array();

	var nameArray = new Array();

	var isChecked = false;

	var viz;

	// var allNodes;
	// var highlightActive = false;
	//
	// var nodesDataset = new viz.nodes.getDataSet();
	// var edgesDataset = new viz.edges.getDataSet();


	function hello(){
		// console.log("ABC");

		// viz._completed(e);
		// viz.


		// var element = document. getElementById("elem");


		// var element.onclick = viz._completed(event) {
		// console. log(event);
		// }

		// viz._network();

		// viz.





		// Add an event listener
		document.addEventListener("completed", function(e) {
			// console.log(e.detail); // Prints "Example of an event"

			// viz.registerOnEvent("completed", (e)=>{
			//
			//
			// 	viz["_network"].on("click", (event)=>{

				array.push(viz.nodes.get({
					returnType: "Object"
				}));

			// });

		// });


		});

		// Create the event
		var event = new CustomEvent("completed", { "detail": "Example of an event" });

		// Dispatch/Trigger/Fire the event
		document.dispatchEvent(event);

	}


	function draw(){
		// alert("I am an alert box!");


		var config = {
			container_id: "viz",
			server_url: "bolt://localhost:7687",
			server_user: "neo4j",
			// server_password: "12345",
			server_password: "121212",
			"identity": name,

			labels: {
				"Person": {
					"caption": "name",
				}
			},

			relationships: {
				"IS_FRIENDS_WITH": {
					"caption": true,
				}
			},

			// initial_cypher: "match (p:Person {name : 'Mark'}) match (q:Person {name : 'jennifer'}) MERGE (p)-[r:IS_FRIENDS_WITH]->(q) return p, q, r"
			initial_cypher: "match(p:Person)  return p"

		}


		viz = new NeoVis.default(config);
		viz.render();


		// viz.registerOnEvent("completed", (e)=>{
		// 	viz["_network"].on("click", (event)=>{
		//
		// 		array.push(viz.nodes.get({
		// 			returnType: "Object"
		// 		}));
		//
		// 	});
		// });









		// console.log(viz.dataset(viz.nodes))

		viz.registerOnEvent("completed", (e)=>{
			// viz["_network"].on("selectNode", (event)=>{
			viz["_network"].on("click", (event)=>{
				// console.log(viz.action.name)
				// ...put here what happen when click on a node or edge...
				console.log("Node clicked")
				// console.log(event.nodeValue)
				// console.log(event._nodes);
				// console.log(viz.nodes)

				// console.log()
				// nodes = viz.nodes;
				// nodesDataset = viz.nodes;
				// edgesDataset = viz.edges;
				// wait until render completes


				allNodes = viz.nodes.get({
					returnType: "Object"
				});

				array.push(viz.nodes.get({
					returnType: "Object"
				}));

				allEdges = viz.edges.get({
					returnType: "Object"
				});

				// network = viz.network
				// network.on("selectNode", neighbourhoodHighlight);

				// console.log(allNodes[event.nodes[0]].label)

				// console.log(event.nodes[0])



				// for (let i = 7; i <= 8; i++) {
				// console.log(allNodes[8].label)
				// }

				// console.log(event.nodes[8].label)

				a = allNodes

				// console.log(event.nodes[0]);

				// array.push(event.nodes[0]);








				// console.log(allEdges)










			});

		});








		// viz.registerOnEvent("completed", (e)=>{
		// 	viz["_network"].on("selectEdge", (event)=>{
		//
		//
		// 		allEdges = viz.edges.get({
		// 			returnType: "Object"
		// 		});
		//
		// 		// network = viz.network
		// 		// network.on("selectNode", neighbourhoodHighlight);
		//
		// 		console.log(allEdges[event.edges[0]].label)
		//
		//
		//
		//
		// 	});
		// });



		// selectEdge


		// document.getElementById("abc").click();

		// hello.onclick();


		// hello.prototype.onclick();

		// window.hello();

		// window.onclick = hello();

		// onmousedown(hello());


		// on.onclick();

		// hello.onclick();


		//
		// document.addEventListener("hello", function(e) {
		// 	console.log(e.detail); // Prints "Example of an event"
		//
		// 	// viz.registerOnEvent("completed", (e)=>{
		// 	//
		// 	//
		// 	// 	viz["_network"].on("click", (event)=>{
		//
		// // Create the event
		// var event = new CustomEvent("hello", { "detail": "Example of an event" });
		//
		// // Dispatch/Trigger/Fire the event
		// document.dispatchEvent(event);





	// });

	}

	window.addEventListener('mousemove', e => {
		// console.log("Yes");
		// hello.onclick();

		document.getElementById("abc").click();
		document.getElementById("def").click();


	});



	function on(){

		array2 = array[0];

		// console.log(array2);

		// console.log(array[0])

		// if(Array.isArray(array2) && array2.length)
		// 	console.log("true")


		// console.log(array[0].forEach(array[0].id))
		var count = 0;

		// console.log(array2.size());



		if (!isChecked) {


			for (const id in array2) {
				// if (/*...is an array element property (see below)...*/) {
				// 	const element = array[id];
				// 	console.log(id);
				nameArray.push(array2[id].label);
				isChecked = true;
				// 	console.log(array2[id].label);

				// count++;
				// console.log(event.nodes[id].label)

				// console.log(a[nodes[0]].label)


				// ...use `element`...
				// }
			}
		}

		console.log(nameArray);
		// console.log(count);

		// array.push(a[])

		// console.log(a.length);

		// for (let index = 0; index < a.length; ++index) {
		// 	// const element = theArray[index];
		// 		console.log(a);
		//
		// 	// ...use `element`...
		// }

		// a.forEach(console.log(a));


		// for (let i = 6; i < 8; i++) {
		// 	console.log(a[i].label);
		//
		//
		//
		// }


		// console.log(a[6].label);



	}








</script>
<body onload="draw()">
<button onclick="draw()">Click me</button>
<button id = "def" onclick="on()">Click 2</button>
<button id = "abc" onclick="hello()">Click 3</button>
<div id="viz"></div>
</body>
</html>


